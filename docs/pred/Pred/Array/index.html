<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Array (pred.Pred.Array)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../index.html">pred</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Pred.Array</span></h1></header><div class="doc"><p>arrays are a mutable list of objects, with fixed size.</p><p>they are represented as <code class="code">[|a0; a1; ... an|]</code>.</p><p>size arguments are passed as <code class="code">int</code> -
however, the size of an array is not allowed to be the full range of <code class="code">int</code>.</p><p><code class="code">0 &lt;= size &lt; Sys.max_array_length</code> for most array types,
but <code class="code">0 &lt;= size &lt; Sys.max_array_length / 2</code> for <code class="code">float array</code></p></div><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a t</code><code><span class="keyword"> = </span><span class="type-var">'a</span> array</code><code></code></div><div class="doc"><p>type alias</p></div></div><h2>basic array operations</h2><div class="spec val" id="val-length"><a href="#val-length" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>length : <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p>returns the number of elements which are stored in the array</p></div></div><div class="spec val" id="val-get"><a href="#val-get" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get : <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p>returns the <code class="code">n</code>-th value in the array.
used for the <code class="code">arr.(n)</code> syntax sugar.
one should not use this function by itself;
always use the syntax sugar.</p><p>note: the parameter ordering is &quot;backwards&quot; due to the syntax sugar</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Invalid_argument</span>: if <code class="code">not (0 &lt;= n &lt; length arr)</code></li></ul></div></div><div class="spec val" id="val-unsafe_get"><a href="#val-unsafe_get" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>unsafe_get : <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p><code class="code">unsafe_get arr n</code> is equivalent to <code class="code">get arr n</code>,
except that an instead of raising an exception,
<code class="code">not (0 &lt;= n &lt; length arr)</code> will result in undefined behavior.</p></div></div><div class="spec val" id="val-nth"><a href="#val-nth" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>nth : int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> option</code></div><div class="doc"><p>returns the <code class="code">n</code>-th value in the array.
if <code class="code">n &gt; length arr</code>, then returns <code class="code">None</code>.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Invalid_argument</span>: if <code class="code">n &lt; 0</code></li></ul></div></div><div class="spec val" id="val-set"><a href="#val-set" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>set : <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>sets the <code class="code">n</code>-th object in the array to the provided value.
used for the <code class="code">arr.(n) &lt;- value</code> syntax sugar.
one should not use this function by itself;
always use the syntax sugar.</p><p>note: the parameter ordering is &quot;backwards&quot; due to the syntax sugar</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Invalid_argument</span>: if <code class="code">not (0 &lt;= n &lt; length arr)</code></li></ul></div></div><div class="spec val" id="val-unsafe_set"><a href="#val-unsafe_set" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>unsafe_set : <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">unsafe_set arr n el</code> is equivalent to <code class="code">set arr n el</code>,
except that an instead of raising an exception,
<code class="code">not (0 &lt;= n &lt; length arr)</code> will result in undefined behavior.</p></div></div><h2>constructors</h2><div class="spec val" id="val-make"><a href="#val-make" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>make : int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array</code></div><div class="doc"><p><code class="code">make n el</code> creates the array <code class="code">[|el; el; ... el|]</code> with length <code class="code">n</code>.</p><p>each element in the new array is physically equal to each other element,
in the sense of the <code class="code">==</code> predicate.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Invalid_argument</span>: if n is an invalid size</li></ul></div></div><div class="spec val" id="val-init"><a href="#val-init" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>init : int <span class="keyword">&#8209;&gt;</span> (int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span>) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array</code></div><div class="doc"><p><code class="code">init n f</code> creates the array <code class="code">[|f 0; f 1; ... f (n - 1)|]</code>.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Invalid</span>: argument if n is an invalid size</li></ul></div></div><div class="spec val" id="val-map"><a href="#val-map" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>map : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span>) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> array</code></div><div class="doc"><p><code class="code">map f arr</code> is equivalent to
<code class="code">init (length arr) (fun i -&gt; f arr.(i))</code>.</p></div></div><div class="spec val" id="val-append"><a href="#val-append" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>append : <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array</code></div><div class="doc"><p><code class="code">append [|x0; x1; ... xn|] [|y0; y1; ... yn|]</code>
returns a new array
<code class="code">[|x0; x1; ... xn; y0; y1; ... yn|]</code>.</p></div></div><div class="spec val" id="val-flatten"><a href="#val-flatten" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>flatten : <span class="type-var">'a</span> array list <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array</code></div><div class="doc"><p><code class="code">flatten [[|x0; x1; ... xn|]; [|y0; y1; ... yn|]; ...]</code>
is equivalent to <a href="index.html#val-append">append</a> for each <code class="code">array</code> in the <code class="code">list</code>.</p></div></div><div class="spec val" id="val-concat"><a href="#val-concat" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>concat : <span class="type-var">'a</span> array list <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array</code></div><div class="doc"><p>an alias for <a href="index.html#val-flatten">flatten</a></p></div></div><div class="spec val" id="val-sub"><a href="#val-sub" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sub : int <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array</code></div><div class="doc"><p><code class="code">sub start end arr</code> returns the new array from a subslice of <code class="code">arr</code>:
the sequence from <code class="code">arr.(start)</code> to <code class="code">arr.(end - 1)</code>.</p><p>e.g.: <code class="code">sub [|0; 1; 2; 3; 4|] 2 4</code> returns the array <code class="code">[|2; 3|]</code></p><p>e.g.: <code class="code">sub [|0; 1|] 0 0</code> returns the array <code class="code">[||]</code></p><p>note: this is different from <span class="xref-unresolved" title="unresolved reference to &quot;Caml.sub&quot;"><a href="../index.html#module-Caml">Caml</a>.sub</span>,
but implements the same functionality.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Invalid_parameter</span>: if
<code class="code">start &lt; 0</code>,
<code class="code">end &lt; start</code>,
or <code class="code">end &gt; length arr</code></li></ul></div></div><div class="spec val" id="val-sub_from"><a href="#val-sub_from" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sub_from : int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array</code></div><div class="doc"><p><code class="code">sub_from start arr</code> returns the new array defined by the sequence from
<code class="code">arr.(start)</code> to the end.</p><p>equivalent to <code class="code">sub start (length arr) arr</code></p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Invalid_parameter</span>: if
<code class="code">start &lt; 0</code>,
<code class="code">start &gt; length arr</code></li></ul></div></div><div class="spec val" id="val-sub_to"><a href="#val-sub_to" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sub_to : int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array</code></div><div class="doc"><p><code class="code">sub_to end arr</code> returns the new array defined by the sequence from
<code class="code">arr.(0)</code> to <code class="code">arr.(end - 1)</code>.</p><p>equivalent to <code class="code">sub 0 end arr</code></p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Invalid_parameter</span>: if
<code class="code">end &lt; 0</code>,
<code class="code">end &gt; length arr</code></li></ul></div></div><div class="spec val" id="val-copy"><a href="#val-copy" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>copy : <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array</code></div><div class="doc"><p><code class="code">copy arr</code> returns a new array with the same elements as <code class="code">arr</code>.</p></div></div><h2>search</h2><div class="spec val" id="val-find"><a href="#val-find" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>find : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> bool) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> (int<span class="keyword"> * </span><span class="type-var">'a</span>) option</code></div><div class="doc"><p><code class="code">find p arr</code> finds the first element in <code class="code">arr</code> that satisfies <code class="code">p</code>,
and returns both its index,
and the element itself.</p><p>if no element satisfies the predicate,
then <code class="code">find</code> returns <code class="code">None</code>.</p></div></div><h2>mutation</h2><div class="spec val" id="val-fill"><a href="#val-fill" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>fill : int <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">fill start end el arr</code> sets each element
from <code class="code">arr.(start)</code> to <code class="code">arr.(end - 1)</code> to <code class="code">el</code>.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Invalid_argument</span>: if
<code class="code">start &lt; 0</code>,
<code class="code">end &lt; start</code>,
or <code class="code">end &gt; length arr</code></li></ul></div></div><div class="spec val" id="val-blit"><a href="#val-blit" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>blit : int <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">blit start1 end1 arr1 start2 arr2</code>
copies the elements from <code class="code">arr1.(start1)</code> to <code class="code">arr1.(end1 - 1)</code>,
to the range starting at <code class="code">arr2.(start2)</code>.</p><ul class="at-tag"><li><span class="at-tag raise">Raises</span> <span class="module-path">Invalid_argument</span>: if
<code class="code">start1 &lt; 0</code>, <code class="code">start2 &lt; 0</code>,
<code class="code">end1 &lt; start1</code>,
<code class="code">end1 &gt; length arr1</code>,
or <code class="code">start1 + (end1 - start1) &gt; length arr2</code></li></ul></div></div><div class="spec val" id="val-sort"><a href="#val-sort" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sort : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> int) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">sort c arr</code> sorts <code class="code">arr</code> using <code class="code">c</code> as a comparison function.</p><p>if <code class="code">c a1 a2 &lt; 0</code>, then <code class="code">a1</code> will sort before <code class="code">a2</code>.</p><p>if <code class="code">c a1 a2 &gt; 0</code>, then <code class="code">a1</code> will sort after <code class="code">a2</code>.</p><p>if <code class="code">c a1 a2 = 0</code>, then ordering is not guaranteed.</p><p><code class="code">c</code> must be a total order on the set of elements in the array.</p><p><code class="code">sort</code> is guaranteed to run in constant heap space,
and at most logarithmic stack space.</p></div></div><div class="spec val" id="val-stable_sort"><a href="#val-stable_sort" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>stable_sort : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> int) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>equivalent to <a href="index.html#val-sort">sort</a>, except that elements that compare equal
will have the same order as in the original array.</p><p>not guaranteed to run in constant heap space.</p></div></div><div class="spec val" id="val-fast_sort"><a href="#val-fast_sort" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>fast_sort : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> int) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>equivalent to either <a href="index.html#val-sort">sort</a> or <a href="index.html#val-stable_sort">stable_sort</a>,
whichever is faster on typical input.</p></div></div><h2>iteration</h2><div class="spec val" id="val-to_seq"><a href="#val-to_seq" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>to_seq : <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="../Seq/index.html#type-t">Seq.t</a></code></div><div class="doc"><p><code class="code">to_seq [|a0; a1; ... an|]</code> generates the sequence <code class="code">&lt;a0; a1; ... an&gt;</code>.</p><p>note: there is no <code class="code">of_seq</code> for <code class="code">array</code>.
this is due to the inherent nature of sequences being of unknown size.
it would require an intermediate allocation.</p><p>if one wants something similar,
they can use <code class="code">of_list (List.of_seq seq)</code></p></div></div><div class="spec val" id="val-fold"><a href="#val-fold" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>fold : <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span>) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> array <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p><code class="code">fold a f [|b0; b1; ... bn|]</code> is <code class="code">f (... (f (f a b0) b1) ...) bn</code>.</p></div></div><h2>conversions with <code class="code">list</code></h2><div class="spec val" id="val-to_list"><a href="#val-to_list" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>to_list : <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> list</code></div><div class="doc"><p><code class="code">to_list [|a0; a1; ... an|]</code> creates the list <code class="code">[a0; a1; ... an]</code>.</p></div></div><div class="spec val" id="val-of_list"><a href="#val-of_list" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>of_list : <span class="type-var">'a</span> list <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array</code></div><div class="doc"><p><code class="code">of_list [a0; a1; ... an]</code> creates the array <code class="code">[|a0; a1; ... an|]</code>.</p></div></div></body></html>